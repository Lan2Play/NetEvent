@page "/administration/settings"
@attribute [Authorize(Policy = "Admin.Settings.*")]
@inject Microsoft.Extensions.Localization.IStringLocalizer<App> Localize

@using Microsoft.AspNetCore.Authorization
@using NetEvent.Client.Components.Administration
@using NetEvent.Shared.Config

<MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">

    <AuthorizeView Policy="Admin.Settings.Organization.*">
        <Authorized>
            <MudTabPanel Text="@Localize["Administration.Settings.Organization"]">
                @if (_Loading)
                {
                    <div>@Localize["Administration.Settings.LoadingData"]</div>
                }
                else
                {
                    <MudGrid>
                        @foreach (var systemSetting in _SystemSettings.OrganizationData)
                        {
                            <SystemSettingControl SystemSetting="systemSetting" Value="@GetValue(systemSetting.Key)" />
                        }
                    </MudGrid>
                }
            </MudTabPanel>
            <MudTabPanel Text="@Localize["Administration.Settings.Authentication"]">
                @if (_Loading)
                {
                    <div>@Localize["Administration.Settings.LoadingData"]</div>
                }
                else
                {
                    <MudGrid>
                        @foreach (var systemSetting in _SystemSettings.AuthenticationData)
                        {
                            <SystemSettingControl SystemSetting="systemSetting" Value="@GetValue(systemSetting.Key)" />
                        }
                    </MudGrid>
                }
            </MudTabPanel>
        </Authorized>
    </AuthorizeView>
</MudTabs>