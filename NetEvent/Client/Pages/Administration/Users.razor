@page "/administration/users"
@using Microsoft.AspNetCore.Authorization
@using NetEvent.Shared.Models;

@attribute [Authorize(Roles = "Admin")]

<MudDataGrid T="ApplicationUser"
             MultiSelection="false"
             Items="@AllUsers"
             Sortable="true"
             Filterable="true"
             ReadOnly="false"
             EditMode="DataGridEditMode.Form"
             EditTrigger="DataGridEditTrigger.Manual"
             CommittedItemChanges="@CommittedItemChanges"
             QuickFilter="@_quickFilter"
             Hideable="true">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Periodic Elements</MudText>
        <MudSpacer />
        <MudTextField @bind-Value="_searchString" Placeholder="Search" Adornment="Adornment.Start" Immediate="true"
            AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
    </ToolBarContent>
    <Columns>
        <SelectColumn T="ApplicationUser" />
        <Column T="ApplicationUser" Field="UserName" Title="Username"/>
        <Column T="ApplicationUser" Field="FirstName" />
        <Column T="ApplicationUser" Field="LastName" />
        <Column T="ApplicationUser" Field="Email" />
        <Column T="ApplicationUser" Field="PhoneNumber" Title="Molar mass" />
        <Column T="ApplicationUser" Field="EmailConfirmed" >
            <CellTemplate>
                <MudCheckBox Checked="@context.Item.EmailConfirmed" ReadOnly="true" />
            </CellTemplate>
            <EditTemplate>
                <MudCheckBox @bind-Checked="@context.Item.EmailConfirmed" Label="Email confirmed" />
            </EditTemplate>
        </Column>
         <Column T="ApplicationUser" CellClass="d-flex justify-end">
            <CellTemplate>
                <MudIconButton Size="@Size.Small" Icon="@Icons.Outlined.Edit" OnClick="@context.Actions.StartEditingItem" />
            </CellTemplate>
        </Column>
    </Columns>
    <PagerContent>
        <MudDataGridPager T="ApplicationUser" />
    </PagerContent>
</MudDataGrid>


